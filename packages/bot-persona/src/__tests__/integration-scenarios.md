# Ключевые сценарии интеграционных тестов для BotPersona

## 1. Простой FAQ-бот
**Описание**: Бот отвечает на часто задаваемые вопросы с помощью заранее определенных ответов.
**Состояния**:
- welcome: Приветствие и список вопросов
- faq1: Ответ на первый вопрос
- faq2: Ответ на второй вопрос
- faq3: Ответ на третий вопрос
- end: Завершение диалога

## 2. Бот для записи на прием
**Описание**: Бот помогает записаться на прием, собирая информацию от пользователя.
**Состояния**:
- welcome: Приветствие и запрос типа услуги
- selectService: Выбор услуги
- provideName: Ввод имени
- provideContact: Ввод контактных данных
- selectDateTime: Выбор даты и времени
- confirm: Подтверждение записи
- success: Успешная запись
- end: Завершение диалога

## 3. Комплексный бот для ресторана
**Описание**: Бот для ресторана с множеством функций: просмотр меню, заказ блюд, бронирование столика.
**Состояния**:
- welcome: Приветствие и основное меню
- menu: Просмотр меню
- order: Заказ блюд
- orderDetails: Подробности заказа
- reservation: Бронирование столика
- reservationDetails: Детали бронирования
- checkout: Оформление заказа
- payment: Оплата
- confirmation: Подтверждение
- end: Завершение диалога

## Общие сценарии для тестирования

### Успешный путь (Happy Path)
- Создание BotPersona с FSM и ViewMap
- Запуск диалога через startConversationUseCase
- Последовательная обработка ввода пользователя
- Корректный переход между состояниями
- Отображение соответствующих компонентов
- Завершение диалога

### Обработка неверного ввода
- Ввод недопустимых команд в состоянии
- Проверка реакции на неверный ввод (invalidInputOutPort)
- Корректное сохранение состояния при ошибке

### Работа с контекстом
- Использование assign для сохранения данных в контексте
- Резолвинг пропсов компонентов из контекста
- Проверка корректности данных в контексте

### Завершение диалога
- Автоматическое завершение диалога при достижении финального состояния
- Вызов conversationFinishedOutPort
- Проверка статуса завершенного диалога

## Компоненты для тестирования
1. FSM (Finite State Machine)
2. ViewMap (Карта представлений)
3. Context (Контекст диалога)
4. Use Cases (startConversationUseCase, processUserInputUseCase)
5. Порты и адаптеры
6. Валидация данных