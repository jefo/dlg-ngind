# Модуль контекста BotPersona (Персона-Бот): `bot-ui`

## 1. Общее описание

**`bot-ui`** — это модуль контекста BotPersona (Персона-Бот), отвечающий за **визуальное представление диалоговых интерфейсов** в чат-ботах. Он определяет, как будет выглядеть интерфейс бота и как пользователь будет с ним взаимодействовать.

Модуль представляет собой "UI-кит" или "движок рендеринга", который позволяет создавать богатые интерфейсы для диалоговых систем независимо от платформы (Telegram, Slack, Web и т.д.).

## 2. Бизнес-ценность модуля

### Основные функции модуля:

1. **Библиотека компонентов интерфейса** — Единый источник правды о том, из каких элементов может состоять интерфейс бота:
   - Сообщения (Messages) с различными стилями
   - Кнопки действий (Buttons) 
   - Карточки с информацией (Cards)
   - Карточки товаров (Product Cards) с изображением, описанием и ценой
   - Карточки ботов (Bot Product Cards) с функциями, стоимостью и интеграциями
   - Галереи изображений (Carousels)
   - И другие UI-элементы

2. **Компоновка интерфейсов (Views)** — Возможность создавать сложные экраны, комбинируя компоненты в различные layout'ы:
   - Вертикальные и горизонтальные списки
   - Сетки элементов
   - Комбинированные представления

3. **Движок персонализации** — Механизм подстановки данных в шаблоны интерфейса:
   - Персонализация приветствий
   - Динамическое отображение информации
   - Адаптация интерфейса под контекст диалога

4. **Платформо-независимый рендеринг** — Подготовка универсального описания интерфейса, которое затем может быть адаптировано под любую платформу.

5. **Слой презентации** — Преобразование универсального описания интерфейса в формат, понятный конкретной платформе (Telegram, Web и др.)

## 3. Взаимодействие с другими модулями

### Входящие зависимости:
- **`bot-persona`** (модуль BotPersona) — Запрашивает рендеринг интерфейсов для отображения ответов бота пользователю

### Исходящие зависимости:
- **Презентеры платформ** — Получают универсальное описание интерфейса и адаптируют его под конкретные платформы (Telegram, Slack, Web)

## 4. Архитектурный подход модуля

Модуль разработан в соответствии с принципами **Domain-Driven Design** и **Гексагональной архитектуры** с использованием фреймворка **SotaJS**:

### Уровни архитектуры:

1. **Домен (`src/domain`):**
   - **Компоненты (`components`):** Схемы и типы для всех UI-компонентов как объектов-значений
   - **Представления (`view.aggregate.ts`):** Агрегаты, определяющие компоновку компонентов и layout
   - **Порты (`ports.ts`):** Абстрактные контракты для движка шаблонизации и выходные порты

2. **Приложение (`src/application`):**
   - **Use Cases:** Основной use case — `renderViewUseCase`, который оркестрирует процесс рендеринга
   - **DTO (`dto/`):** Структуры данных для передачи между слоями
   - **Порты презентации (`ports/`):** Контракты для слоя презентации

3. **Инфраструктура (`src/infrastructure`):**
   - **Адаптеры (`adapters`):** Конкретная реализация порта рендеринга

4. **Презентация (`src/presentation`):**
   - **Адаптеры презентации:** Преобразование универсального описания в формат конкретной платформы

### Специализированные компоненты:

1. **MessageComponent** - текстовое сообщение с вариантами оформления
2. **ButtonComponent** - интерактивная кнопка с действием
3. **CardComponent** - карточка с заголовком, описанием и изображением
4. **ProductCardComponent** - карточка товара с изображением, описанием, ценой и кнопкой "подробнее"
5. **BotProductCardComponent** - карточка бота с названием модели, функциями, стоимостью, интеграциями и кнопкой "подробнее"

## 5. Преимущества подхода модуля

### Для бизнеса:
- **Гибкость интерфейсов** — Возможность быстро создавать и модифицировать интерфейсы ботов
- **Консистентность** — Единый подход к построению интерфейсов во всех каналах
- **Персонализация** — Автоматическая адаптация интерфейсов под пользователей
- **Мультиплатформенность** — Поддержка различных платформ с единой кодовой базой

### Для разработки:
- **Тестируемость** — Все бизнес-правила изолированы и покрыты тестами
- **Расширяемость** — Простое добавление новых типов компонентов, layout'ов и платформ
- **Поддерживаемость** — Четкое разделение ответственности между слоями
- **Типобезопасность** — Строгая типизация на всех уровнях

## 6. Интеграция
Используй `renderViewUseCase` для рендеринга
